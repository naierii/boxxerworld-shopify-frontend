"use strict";(self.webpackChunkboxxerworld_customiser=self.webpackChunkboxxerworld_customiser||[]).push([[877],{4877:function(n,i,t){t.r(i),t.d(i,{default:function(){return S}});var e=t(5893),o=t(1280),r=t(741),a=t(1447),l=t(4184),u=t.n(l),c=t(7294),d=t(2358),s=function(n,i,t,e){return new(t||(t=Promise))((function(o,r){function a(n){try{u(e.next(n))}catch(n){r(n)}}function l(n){try{u(e.throw(n))}catch(n){r(n)}}function u(n){var i;n.done?o(n.value):(i=n.value,i instanceof t?i:new t((function(n){n(i)}))).then(a,l)}u((e=e.apply(n,i||[])).next())}))},f=function(n,i){var t,e,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(u){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(a=0)),a;)try{if(t=1,e&&(o=2&l[0]?e.return:l[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,l[1])).done)return o;switch(e=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,e=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=i.call(n,a)}catch(n){l=[6,n],e=0}finally{t=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}},v=function(n){return s(void 0,void 0,void 0,(function(){return f(this,(function(i){return[2,fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})]}))}))},p=t(4864),h=t(8228),g=t(3379),y=t.n(g),m=t(7912),b={insert:"head",singleton:!1},w=(y()(m.Z,b),m.Z.locals||{}),P=function(){return P=Object.assign||function(n){for(var i,t=1,e=arguments.length;t<e;t++)for(var o in i=arguments[t])Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o]);return n},P.apply(this,arguments)},x=function(n,i,t,e){return new(t||(t=Promise))((function(o,r){function a(n){try{u(e.next(n))}catch(n){r(n)}}function l(n){try{u(e.throw(n))}catch(n){r(n)}}function u(n){var i;n.done?o(n.value):(i=n.value,i instanceof t?i:new t((function(n){n(i)}))).then(a,l)}u((e=e.apply(n,i||[])).next())}))},V=function(n,i){var t,e,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(u){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(a=0)),a;)try{if(t=1,e&&(o=2&l[0]?e.return:l[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,l[1])).done)return o;switch(e=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,e=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=i.call(n,a)}catch(n){l=[6,n],e=0}finally{t=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}},z=function(n,i){var t,e,o,r,a,l,u,c,d,s,f,v,p;return{customProduct:null===(t=n.customProduct)||void 0===t?void 0:t.id,parts:n.savedParts.map((function(n){var i,t;return{name:n.part.name,areaSize:null===(t=null===(i=n.part.areaSize)||void 0===i?void 0:i.data)||void 0===t?void 0:t.id,material:n.material.id}})),texts:n.texts.map((function(n){var i,t,e,o,r;return{text:n.text,decalPosition:n.decalPosition,decalOrientation:n.decalOrientation,decalRotation:n.decalRotation,decalScale:n.decalScale,basePriceVariantId:null===(i=n.basePrice)||void 0===i?void 0:i.shopifyVariantId,letterPriceVariantId:null===(t=n.letterPrice)||void 0===t?void 0:t.shopifyVariantId,outlinePriceVariantId:null===(e=n.outlinePrice)||void 0===e?void 0:e.shopifyVariantId,puffPriceVariantId:null===(o=n.puffPrice)||void 0===o?void 0:o.shopifyVariantId,crystalPriceVariantId:null===(r=n.crystalPrice)||void 0===r?void 0:r.shopifyVariantId}})),flags:n.flags.map((function(n){var i,t;return{flag:null===(i=n.flag)||void 0===i?void 0:i.id,decalPosition:n.decalPosition,decalOrientation:n.decalOrientation,decalRotation:n.decalRotation,decalScale:n.decalScale,size:n.size,shopifyVariantId:null===(t=n.basePrice)||void 0===t?void 0:t.shopifyVariantId}})),graphics:n.graphics.map((function(n){var i,t;return{graphic:null===(i=n.graphic)||void 0===i?void 0:i.id,decalPosition:n.decalPosition,decalOrientation:n.decalOrientation,decalRotation:n.decalRotation,decalScale:n.decalScale,size:n.size,shopifyVariantId:null===(t=n.basePrice)||void 0===t?void 0:t.shopifyVariantId}})),images:i,sizing:{shopifyVariantId:null===(o=null===(e=n.sizing)||void 0===e?void 0:e.variation)||void 0===o?void 0:o.id,size:null===(r=n.sizing)||void 0===r?void 0:r.size,height:null===(u=null===(l=null===(a=n.sizing)||void 0===a?void 0:a.height)||void 0===l?void 0:l.value)||void 0===u?void 0:u.toString(),heightUnit:null===(d=null===(c=n.sizing)||void 0===c?void 0:c.height)||void 0===d?void 0:d.unit,weight:null===(f=null===(s=n.sizing)||void 0===s?void 0:s.weight)||void 0===f?void 0:f.value,weightUnit:null===(p=null===(v=n.sizing)||void 0===v?void 0:v.weight)||void 0===p?void 0:p.unit}}},I=function(n){var i,t,e,o,r,a=null==n?void 0:n.id,l=null==n?void 0:n.attributes;if(!l||!a)return[];var u=[],c=function(n){return null==n?void 0:n.replace("gid://shopify/ProductVariant/","")},d=function(n,i){void 0===i&&(i=1);var t=function(n){return u.find((function(i){return i.id===n}))}(n);if(t){var e=t.quantity+i;t.quantity=e,t.properties._customDesignQuantity=e}else u.push({id:n,quantity:i,properties:{_customDesignAddon:a,_customDesignQuantity:i}})};return(null===(i=l.parts)||void 0===i?void 0:i.length)&&l.parts.forEach((function(n){var i=c(null==n?void 0:n.shopifyVariantId);i&&d(i)})),(null===(t=l.flags)||void 0===t?void 0:t.length)&&l.flags.forEach((function(n){var i=c(null==n?void 0:n.shopifyVariantId);i&&d(i)})),(null===(e=l.graphics)||void 0===e?void 0:e.length)&&l.graphics.forEach((function(n){var i=c(null==n?void 0:n.shopifyVariantId);i&&d(i)})),(null===(o=l.texts)||void 0===o?void 0:o.length)&&l.texts.forEach((function(n){var i,t=c(null==n?void 0:n.basePriceVariantId);t&&d(t);var e=c(null==n?void 0:n.letterPriceVariantId);e&&d(e,null===(i=null==n?void 0:n.text)||void 0===i?void 0:i.length);var o=c(null==n?void 0:n.outlinePriceVariantId);o&&d(o);var r=c(null==n?void 0:n.puffPriceVariantId);r&&d(r);var a=c(null==n?void 0:n.crystalPriceVariantId);a&&d(a)})),(null===(r=l.sizing)||void 0===r?void 0:r.shopifyVariantId)&&u.push({id:c(l.sizing.shopifyVariantId),quantity:1,properties:{_customDesign:a}}),u},S=function(n){var i=n.className,t=n.cameraRef,l=n.canvasRef,s=(0,c.useRef)([]),f=u()(w.root,i),g=(0,a.b)((function(n){return n.total()})),y=(0,p.H)((function(n){return n.addingToCart})),m=(0,p.H)((function(n){return n.modelRotation})),b=(0,p.H)((function(n){return n.setAddingToCart})),S=(0,p.H)((function(n){return n.setModelRotation})),O=(0,a.b)((function(n){return n.reset})),k=(0,a.b)((function(n){return n})),R=(0,h.D)({mutationFn:v,onSuccess:function(){window.location.href=window.Shopify.routes.root+"cart",O()}}),A=(0,r.ZF)(d.SL,{onSuccess:function(n){var i;if(null===(i=n.createCustomDesign)||void 0===i?void 0:i.data){var t=I(n.createCustomDesign.data);R.mutate({items:t})}}}).mutate,j=(0,r.a1)(d.SL,{onSuccess:function(n){var i=n.multipleUpload.map((function(n){var i;return null===(i=null==n?void 0:n.data)||void 0===i?void 0:i.id}));A({data:z(k,i)})}}).mutateAsync;(0,c.useEffect)((function(){if(y&&m<360)setTimeout((function(){var n;null===(n=null==l?void 0:l.current)||void 0===n||n.toBlob((function(n){if(n){var i=new File([n],"fileName.png",{type:"image/png"});s.current.push(i),S(m+90)}}),"image/png")}),50);else if(y){x(void 0,void 0,void 0,(function(){return V(this,(function(n){switch(n.label){case 0:return[4,j({files:s.current})];case 1:return n.sent(),[2]}}))}))}}),[m,y,s]);var C=(0,c.useCallback)((function(){var n=t.current;n&&(n.position.set(0,21970893240496195e-31,25.31024512625285),b())}),[]);return(0,e.jsxs)("div",P({className:f},{children:[(0,e.jsxs)("div",P({className:w.total},{children:["Current ",(0,e.jsxs)("span",P({className:w.price},{children:["$",g]}))]})),(0,e.jsx)(o.Z,P({onClick:function(){C()}},{children:"Add to basket"}))]}))}},7912:function(n,i,t){var e=t(3645),o=t.n(e)()((function(n){return n[1]}));o.push([n.id,".itxMAOim41PgTfY6iDBzyA\\=\\={align-items:center;display:flex;justify-content:space-between;padding:0 1rem}@media (min-width:46.25em){.itxMAOim41PgTfY6iDBzyA\\=\\={justify-content:flex-end;padding:0}}.NdjdSLwFAtnRAJlzNwrLVw\\=\\={font-family:bebas-neue-by-fontfabric,sans-serif;font-size:1.25rem;font-weight:900;margin-right:2.5rem}.Y8aEsQ5az6OCKhs\\+RZhq7g\\=\\={color:#cc0101}",""]),o.locals={root:"itxMAOim41PgTfY6iDBzyA==",total:"NdjdSLwFAtnRAJlzNwrLVw==",price:"Y8aEsQ5az6OCKhs+RZhq7g=="},i.Z=o}}]);